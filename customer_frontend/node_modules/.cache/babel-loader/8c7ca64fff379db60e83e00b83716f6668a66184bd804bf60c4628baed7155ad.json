{"ast":null,"code":"var _jsxFileName = \"/Users/amahitiarachchi/Downloads/SysDevPr/customer_frontend/src/pages/UserInvoices.jsx\",\n  _s = $RefreshSig$();\nimport { Alert, Button, Card, Col, Container, Form, Modal, Row, Spinner, Table } from 'react-bootstrap';\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsPDF } from 'jspdf';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserInvoices = () => {\n  _s();\n  const [invoices, setInvoices] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [currentInvoice, setCurrentInvoice] = useState(null);\n  const [paymentAmount, setPaymentAmount] = useState(0);\n  const [paymentOption, setPaymentOption] = useState('full'); // 'full' or 'advance'\n  const [paymentLoading, setPaymentLoading] = useState(false);\n  const [paymentError, setPaymentError] = useState('');\n  const [paymentSuccess, setPaymentSuccess] = useState(false);\n  const [cardDetails, setCardDetails] = useState({\n    cardNumber: '',\n    expiryDate: '',\n    cvv: '',\n    cardName: ''\n  });\n  useEffect(() => {\n    const fetchInvoices = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem('token');\n        const response = await axios.get('http://localhost:4000/api/quotation/get_invoice', {\n          headers: {\n            token\n          }\n        });\n        if (response.data.success) {\n          const categorizedInvoices = response.data.invoices.reduce((acc, invoice) => {\n            if (!acc[invoice.invoice_id]) {\n              acc[invoice.invoice_id] = {\n                ...invoice,\n                items: []\n              };\n            }\n            acc[invoice.invoice_id].items = invoice.items;\n            return acc;\n          }, {});\n          setInvoices(Object.values(categorizedInvoices));\n        } else {\n          setError('Failed to fetch invoices');\n        }\n      } catch (err) {\n        console.error(err);\n        setError('Error fetching invoices');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchInvoices();\n  }, [paymentSuccess]);\n  const handlePaymentClick = invoice => {\n    setCurrentInvoice(invoice);\n    const totalDue = invoice.total_amount - invoice.paid_amount;\n    setPaymentAmount(totalDue);\n    setPaymentOption('full'); // Default to full payment\n    setShowPaymentModal(true);\n    setPaymentError('');\n  };\n  const handleClosePaymentModal = () => {\n    setShowPaymentModal(false);\n    setPaymentError('');\n    setCardDetails({\n      cardNumber: '',\n      expiryDate: '',\n      cvv: '',\n      cardName: ''\n    });\n  };\n  const handleCardChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCardDetails(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const formatCardNumber = value => {\n    const v = value.replace(/\\s+/g, '').replace(/[^0-9]/gi, '');\n    const matches = v.match(/\\d{4,16}/g);\n    const match = matches && matches[0] || '';\n    const parts = [];\n    for (let i = 0, len = match.length; i < len; i += 4) {\n      parts.push(match.substring(i, i + 4));\n    }\n    if (parts.length) {\n      return parts.join(' ');\n    } else {\n      return value;\n    }\n  };\n  const formatExpiryDate = value => {\n    const v = value.replace(/[^0-9]/g, '');\n    if (v.length >= 3) {\n      return `${v.slice(0, 2)}/${v.slice(2, 4)}`;\n    }\n    return value;\n  };\n  const handlePaymentOptionChange = option => {\n    setPaymentOption(option);\n    if (currentInvoice) {\n      const totalDue = currentInvoice.total_amount - currentInvoice.paid_amount;\n      if (option === 'advance') {\n        setPaymentAmount(totalDue * 0.3); // 30% of total due\n      } else {\n        setPaymentAmount(totalDue); // Full amount\n      }\n    }\n  };\n  const handlePaymentSubmit = async e => {\n    e.preventDefault();\n    setPaymentLoading(true);\n    setPaymentError('');\n    try {\n      // Validate card details\n      if (!cardDetails.cardNumber || !cardDetails.expiryDate || !cardDetails.cvv || !cardDetails.cardName) {\n        throw new Error('Please fill all card details');\n      }\n      if (cardDetails.cardNumber.replace(/\\s/g, '').length !== 16) {\n        throw new Error('Please enter a valid 16-digit card number');\n      }\n      if (cardDetails.cvv.length !== 3) {\n        throw new Error('Please enter a valid 3-digit CVV');\n      }\n      const token = localStorage.getItem('token');\n      const response = await axios.post('http://localhost:4000/api/quotation/invoice_payment', {\n        invoiceId: currentInvoice.invoice_id,\n        paymentAmount: paymentAmount,\n        paymentType: paymentOption // Send payment type to backend\n      }, {\n        headers: {\n          token\n        }\n      });\n      if (response.data.success) {\n        setPaymentSuccess(true);\n        setTimeout(() => {\n          setShowPaymentModal(false);\n          setPaymentSuccess(false);\n        }, 2000);\n      } else {\n        throw new Error(response.data.message || 'Payment failed');\n      }\n    } catch (err) {\n      console.error(err);\n      setPaymentError(err.message || 'Error processing payment');\n    } finally {\n      setPaymentLoading(false);\n    }\n  };\n  const downloadInvoice = invoice => {\n    const doc = new jsPDF();\n    doc.setFont('helvetica', 'normal');\n    doc.setFontSize(12);\n    doc.text('LuxeVista Resort', 10, 10);\n    doc.text('123 Beachside Ave, Paradise City', 10, 20);\n    doc.text('Phone: +123 456 7890', 10, 30);\n    doc.text('---------------------------------', 10, 40);\n    doc.text(`Invoice ID: ${invoice.invoice_id}`, 10, 50);\n    doc.text(`Date: ${new Date(invoice.created_at).toLocaleDateString()}`, 10, 60);\n    doc.text('---------------------------------', 10, 70);\n    doc.text('Items:', 10, 80);\n    let yPosition = 90;\n    invoice.items.forEach((item, index) => {\n      doc.text(`${item.material_name}`, 10, yPosition);\n      doc.text(`Qty: ${item.quantity}`, 80, yPosition);\n      doc.text(`$${item.unit_price}`, 130, yPosition);\n      yPosition += 10;\n    });\n    doc.text('---------------------------------', 10, yPosition);\n    yPosition += 10;\n    doc.text(`Total Amount: $${invoice.total_amount}`, 10, yPosition);\n    yPosition += 10;\n    doc.text(`Paid Amount: $${invoice.paid_amount}`, 10, yPosition);\n    yPosition += 10;\n    doc.text(`Payment Status: ${invoice.payment_status}`, 10, yPosition);\n    yPosition += 20;\n    doc.text('Thank you for your purchase!', 10, yPosition);\n    doc.save(`Invoice_${invoice.invoice_id}.pdf`);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(Spinner, {\n    animation: \"border\",\n    variant: \"primary\",\n    className: \"d-block mx-auto mt-5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(Alert, {\n    variant: \"danger\",\n    className: \"mt-3\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center mb-4\",\n      children: \"Your Invoices\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), invoices.length === 0 ? /*#__PURE__*/_jsxDEV(Alert, {\n      style: {\n        maxWidth: '80%',\n        marginLeft: '50px'\n      },\n      variant: \"info\",\n      children: \"No invoices found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }, this) : invoices.map(invoice => /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-3 shadow-sm bill-card mx-auto\",\n      style: {\n        maxWidth: '80%'\n      },\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"text-center\",\n          children: \"LuxeVista Resort\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center\",\n          children: \"123 Beachside Ave, Paradise City\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center\",\n          children: \"Phone: +123 456 7890\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Invoice ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 18\n          }, this), \" \", invoice.invoice_id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 18\n          }, this), \" \", new Date(invoice.created_at).toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          size: \"sm\",\n          bordered: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Item\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Qty\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: invoice.items.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.material_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"$\", item.unit_price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Total Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 18\n          }, this), \" $\", invoice.total_amount, \"(With Services Charges)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Paid Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 18\n          }, this), \" $\", invoice.paid_amount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Payment Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 18\n          }, this), \" \", invoice.payment_status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center\",\n          children: \"Thank you for your purchase!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            size: \"sm\",\n            className: \"mt-2 flex-grow-1\",\n            onClick: () => downloadInvoice(invoice),\n            children: \"Download Invoice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 17\n          }, this), invoice.payment_status !== 'Completed' && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"success\",\n            size: \"sm\",\n            className: \"mt-2 flex-grow-1\",\n            onClick: () => handlePaymentClick(invoice),\n            children: \"Make Payment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }, this)\n    }, invoice.invoice_id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showPaymentModal,\n      onHide: handleClosePaymentModal,\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: [\"Payment for Invoice #\", currentInvoice === null || currentInvoice === void 0 ? void 0 : currentInvoice.invoice_id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: handlePaymentSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: [paymentError && /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"danger\",\n            children: paymentError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 30\n          }, this), paymentSuccess ? /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"success\",\n            children: \"Payment processed successfully! Invoice will be updated.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Payment Option\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 31\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: paymentOption === 'full' ? 'primary' : 'outline-primary',\n                  onClick: () => handlePaymentOptionChange('full'),\n                  className: \"flex-grow-1\",\n                  children: [\"Full Payment ($\", ((currentInvoice === null || currentInvoice === void 0 ? void 0 : currentInvoice.total_amount) - (currentInvoice === null || currentInvoice === void 0 ? void 0 : currentInvoice.paid_amount)).toFixed(2), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: paymentOption === 'advance' ? 'primary' : 'outline-primary',\n                  onClick: () => handlePaymentOptionChange('advance'),\n                  className: \"flex-grow-1\",\n                  children: [\"30% Advance ($\", (((currentInvoice === null || currentInvoice === void 0 ? void 0 : currentInvoice.total_amount) - (currentInvoice === null || currentInvoice === void 0 ? void 0 : currentInvoice.paid_amount)) * 0.3).toFixed(2), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Amount to Pay:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 19\n              }, this), \" $\", paymentAmount.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Card Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                name: \"cardNumber\",\n                value: formatCardNumber(cardDetails.cardNumber),\n                onChange: e => {\n                  const formatted = formatCardNumber(e.target.value);\n                  setCardDetails(prev => ({\n                    ...prev,\n                    cardNumber: formatted\n                  }));\n                },\n                placeholder: \"1234 5678 9012 3456\",\n                maxLength: 19,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Expiry Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    name: \"expiryDate\",\n                    value: formatExpiryDate(cardDetails.expiryDate),\n                    onChange: e => {\n                      const formatted = formatExpiryDate(e.target.value);\n                      setCardDetails(prev => ({\n                        ...prev,\n                        expiryDate: formatted\n                      }));\n                    },\n                    placeholder: \"MM/YY\",\n                    maxLength: 5,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"CVV\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    name: \"cvv\",\n                    value: cardDetails.cvv,\n                    onChange: handleCardChange,\n                    placeholder: \"123\",\n                    maxLength: 3,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Cardholder Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                name: \"cardName\",\n                value: cardDetails.cardName,\n                onChange: handleCardChange,\n                placeholder: \"John Doe\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: !paymentSuccess && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: handleClosePaymentModal,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              type: \"submit\",\n              disabled: paymentLoading,\n              children: paymentLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Spinner, {\n                  as: \"span\",\n                  animation: \"border\",\n                  size: \"sm\",\n                  role: \"status\",\n                  \"aria-hidden\": \"true\",\n                  className: \"me-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 23\n                }, this), \"Processing...\"]\n              }, void 0, true) : 'Confirm Payment'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n};\n_s(UserInvoices, \"SWiPWe38t6CkbN2YRbiAOmpcAOA=\");\n_c = UserInvoices;\nexport default UserInvoices;\nvar _c;\n$RefreshReg$(_c, \"UserInvoices\");","map":{"version":3,"names":["Alert","Button","Card","Col","Container","Form","Modal","Row","Spinner","Table","React","useEffect","useState","axios","jsPDF","jsxDEV","_jsxDEV","Fragment","_Fragment","UserInvoices","_s","invoices","setInvoices","loading","setLoading","error","setError","showPaymentModal","setShowPaymentModal","currentInvoice","setCurrentInvoice","paymentAmount","setPaymentAmount","paymentOption","setPaymentOption","paymentLoading","setPaymentLoading","paymentError","setPaymentError","paymentSuccess","setPaymentSuccess","cardDetails","setCardDetails","cardNumber","expiryDate","cvv","cardName","fetchInvoices","token","localStorage","getItem","response","get","headers","data","success","categorizedInvoices","reduce","acc","invoice","invoice_id","items","Object","values","err","console","handlePaymentClick","totalDue","total_amount","paid_amount","handleClosePaymentModal","handleCardChange","e","name","value","target","prev","formatCardNumber","v","replace","matches","match","parts","i","len","length","push","substring","join","formatExpiryDate","slice","handlePaymentOptionChange","option","handlePaymentSubmit","preventDefault","Error","post","invoiceId","paymentType","setTimeout","message","downloadInvoice","doc","setFont","setFontSize","text","Date","created_at","toLocaleDateString","yPosition","forEach","item","index","material_name","quantity","unit_price","payment_status","save","animation","variant","className","fileName","_jsxFileName","lineNumber","columnNumber","children","style","maxWidth","marginLeft","map","Body","size","bordered","onClick","show","onHide","centered","Header","closeButton","Title","onSubmit","Label","toFixed","Group","Control","type","onChange","formatted","placeholder","maxLength","required","md","Footer","disabled","as","role","_c","$RefreshReg$"],"sources":["/Users/amahitiarachchi/Downloads/SysDevPr/customer_frontend/src/pages/UserInvoices.jsx"],"sourcesContent":["import { Alert, Button, Card, Col, Container, Form, Modal, Row, Spinner, Table } from 'react-bootstrap';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nimport axios from 'axios';\r\nimport { jsPDF } from 'jspdf';\r\n\r\nconst UserInvoices = () => {\r\n  const [invoices, setInvoices] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\r\n  const [currentInvoice, setCurrentInvoice] = useState(null);\r\n  const [paymentAmount, setPaymentAmount] = useState(0);\r\n  const [paymentOption, setPaymentOption] = useState('full'); // 'full' or 'advance'\r\n  const [paymentLoading, setPaymentLoading] = useState(false);\r\n  const [paymentError, setPaymentError] = useState('');\r\n  const [paymentSuccess, setPaymentSuccess] = useState(false);\r\n  const [cardDetails, setCardDetails] = useState({\r\n    cardNumber: '',\r\n    expiryDate: '',\r\n    cvv: '',\r\n    cardName: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchInvoices = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const token = localStorage.getItem('token');\r\n        const response = await axios.get('http://localhost:4000/api/quotation/get_invoice', {\r\n          headers: { token },\r\n        });\r\n\r\n        if (response.data.success) {\r\n          const categorizedInvoices = response.data.invoices.reduce((acc, invoice) => {\r\n            if (!acc[invoice.invoice_id]) {\r\n              acc[invoice.invoice_id] = {\r\n                ...invoice,\r\n                items: [],\r\n              };\r\n            }\r\n            acc[invoice.invoice_id].items = invoice.items;\r\n            return acc;\r\n          }, {});\r\n\r\n          setInvoices(Object.values(categorizedInvoices));\r\n        } else {\r\n          setError('Failed to fetch invoices');\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError('Error fetching invoices');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchInvoices();\r\n  }, [paymentSuccess]);\r\n\r\n  const handlePaymentClick = (invoice) => {\r\n    setCurrentInvoice(invoice);\r\n    const totalDue = invoice.total_amount - invoice.paid_amount;\r\n    setPaymentAmount(totalDue);\r\n    setPaymentOption('full'); // Default to full payment\r\n    setShowPaymentModal(true);\r\n    setPaymentError('');\r\n  };\r\n\r\n  const handleClosePaymentModal = () => {\r\n    setShowPaymentModal(false);\r\n    setPaymentError('');\r\n    setCardDetails({\r\n      cardNumber: '',\r\n      expiryDate: '',\r\n      cvv: '',\r\n      cardName: ''\r\n    });\r\n  };\r\n\r\n  const handleCardChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setCardDetails(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const formatCardNumber = (value) => {\r\n    const v = value.replace(/\\s+/g, '').replace(/[^0-9]/gi, '');\r\n    const matches = v.match(/\\d{4,16}/g);\r\n    const match = matches && matches[0] || '';\r\n    const parts = [];\r\n    \r\n    for (let i = 0, len = match.length; i < len; i += 4) {\r\n      parts.push(match.substring(i, i + 4));\r\n    }\r\n    \r\n    if (parts.length) {\r\n      return parts.join(' ');\r\n    } else {\r\n      return value;\r\n    }\r\n  };\r\n\r\n  const formatExpiryDate = (value) => {\r\n    const v = value.replace(/[^0-9]/g, '');\r\n    if (v.length >= 3) {\r\n      return `${v.slice(0, 2)}/${v.slice(2, 4)}`;\r\n    }\r\n    return value;\r\n  };\r\n\r\n  const handlePaymentOptionChange = (option) => {\r\n    setPaymentOption(option);\r\n    if (currentInvoice) {\r\n      const totalDue = currentInvoice.total_amount - currentInvoice.paid_amount;\r\n      if (option === 'advance') {\r\n        setPaymentAmount(totalDue * 0.3); // 30% of total due\r\n      } else {\r\n        setPaymentAmount(totalDue); // Full amount\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePaymentSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setPaymentLoading(true);\r\n    setPaymentError('');\r\n\r\n    try {\r\n      // Validate card details\r\n      if (!cardDetails.cardNumber || !cardDetails.expiryDate || !cardDetails.cvv || !cardDetails.cardName) {\r\n        throw new Error('Please fill all card details');\r\n      }\r\n\r\n      if (cardDetails.cardNumber.replace(/\\s/g, '').length !== 16) {\r\n        throw new Error('Please enter a valid 16-digit card number');\r\n      }\r\n\r\n      if (cardDetails.cvv.length !== 3) {\r\n        throw new Error('Please enter a valid 3-digit CVV');\r\n      }\r\n\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.post(\r\n        'http://localhost:4000/api/quotation/invoice_payment',\r\n        {\r\n          invoiceId: currentInvoice.invoice_id,\r\n          paymentAmount: paymentAmount,\r\n          paymentType: paymentOption // Send payment type to backend\r\n        },\r\n        { headers: { token } }\r\n      );\r\n\r\n      if (response.data.success) {\r\n        setPaymentSuccess(true);\r\n        setTimeout(() => {\r\n          setShowPaymentModal(false);\r\n          setPaymentSuccess(false);\r\n        }, 2000);\r\n      } else {\r\n        throw new Error(response.data.message || 'Payment failed');\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setPaymentError(err.message || 'Error processing payment');\r\n    } finally {\r\n      setPaymentLoading(false);\r\n    }\r\n  };\r\n\r\n  const downloadInvoice = (invoice) => {\r\n    const doc = new jsPDF();\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setFontSize(12);\r\n\r\n    doc.text('LuxeVista Resort', 10, 10);\r\n    doc.text('123 Beachside Ave, Paradise City', 10, 20);\r\n    doc.text('Phone: +123 456 7890', 10, 30);\r\n    doc.text('---------------------------------', 10, 40);\r\n\r\n    doc.text(`Invoice ID: ${invoice.invoice_id}`, 10, 50);\r\n    doc.text(`Date: ${new Date(invoice.created_at).toLocaleDateString()}`, 10, 60);\r\n    doc.text('---------------------------------', 10, 70);\r\n\r\n    doc.text('Items:', 10, 80);\r\n    let yPosition = 90;\r\n    invoice.items.forEach((item, index) => {\r\n      doc.text(`${item.material_name}`, 10, yPosition);\r\n      doc.text(`Qty: ${item.quantity}`, 80, yPosition);\r\n      doc.text(`$${item.unit_price}`, 130, yPosition);\r\n      yPosition += 10;\r\n    });\r\n\r\n    doc.text('---------------------------------', 10, yPosition);\r\n    yPosition += 10;\r\n    doc.text(`Total Amount: $${invoice.total_amount}`, 10, yPosition);\r\n    yPosition += 10;\r\n    doc.text(`Paid Amount: $${invoice.paid_amount}`, 10, yPosition);\r\n    yPosition += 10;\r\n    doc.text(`Payment Status: ${invoice.payment_status}`, 10, yPosition);\r\n    yPosition += 20;\r\n\r\n    doc.text('Thank you for your purchase!', 10, yPosition);\r\n\r\n    doc.save(`Invoice_${invoice.invoice_id}.pdf`);\r\n  };\r\n\r\n  if (loading) return <Spinner animation=\"border\" variant=\"primary\" className=\"d-block mx-auto mt-5\" />;\r\n  if (error) return <Alert variant=\"danger\" className=\"mt-3\">{error}</Alert>;\r\n\r\n  return (\r\n    <Container className=\"mt-4\">\r\n      <h2 className=\"text-center mb-4\">Your Invoices</h2>\r\n      {invoices.length === 0 ? (\r\n        <Alert style={{ maxWidth: '80%', marginLeft: '50px' }} variant=\"info\">No invoices found.</Alert>\r\n      ) : (\r\n        invoices.map((invoice) => (\r\n          <Card className=\"mb-3 shadow-sm bill-card mx-auto\" style={{ maxWidth: '80%' }} key={invoice.invoice_id}>\r\n            <Card.Body>\r\n              <h5 className=\"text-center\">LuxeVista Resort</h5>\r\n              <p className=\"text-center\">123 Beachside Ave, Paradise City</p>\r\n              <p className=\"text-center\">Phone: +123 456 7890</p>\r\n              <hr />\r\n              <p><strong>Invoice ID:</strong> {invoice.invoice_id}</p>\r\n              <p><strong>Date:</strong> {new Date(invoice.created_at).toLocaleDateString()}</p>\r\n              <hr />\r\n              <Table size=\"sm\" bordered>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Item</th>\r\n                    <th>Qty</th>\r\n                    <th>Price</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {invoice.items.map((item, index) => (\r\n                    <tr key={index}>\r\n                      <td>{item.material_name}</td>\r\n                      <td>{item.quantity}</td>\r\n                      <td>${item.unit_price}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </Table>\r\n              <hr />\r\n              <p><strong>Total Amount:</strong> ${invoice.total_amount}(With Services Charges)</p>\r\n              <p><strong>Paid Amount:</strong> ${invoice.paid_amount}</p>\r\n              <p><strong>Payment Status:</strong> {invoice.payment_status}</p>\r\n              <hr />\r\n              <p className=\"text-center\">Thank you for your purchase!</p>\r\n              <div className=\"d-flex gap-2\">\r\n                <Button variant=\"primary\" size=\"sm\" className=\"mt-2 flex-grow-1\" onClick={() => downloadInvoice(invoice)}>\r\n                  Download Invoice\r\n                </Button>\r\n                {invoice.payment_status !== 'Completed' && (\r\n                  <Button \r\n                    variant=\"success\" \r\n                    size=\"sm\" \r\n                    className=\"mt-2 flex-grow-1\" \r\n                    onClick={() => handlePaymentClick(invoice)}\r\n                  >\r\n                    Make Payment\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        ))\r\n      )}\r\n\r\n      {/* Payment Modal */}\r\n      <Modal show={showPaymentModal} onHide={handleClosePaymentModal} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Payment for Invoice #{currentInvoice?.invoice_id}</Modal.Title>\r\n        </Modal.Header>\r\n        <Form onSubmit={handlePaymentSubmit}>\r\n          <Modal.Body>\r\n            {paymentError && <Alert variant=\"danger\">{paymentError}</Alert>}\r\n            {paymentSuccess ? (\r\n              <Alert variant=\"success\">\r\n                Payment processed successfully! Invoice will be updated.\r\n              </Alert>\r\n            ) : (\r\n              <>\r\n                <div className=\"mb-3\">\r\n                  <Form.Label><strong>Payment Option</strong></Form.Label>\r\n                  <div className=\"d-flex gap-3\">\r\n                    <Button\r\n                      variant={paymentOption === 'full' ? 'primary' : 'outline-primary'}\r\n                      onClick={() => handlePaymentOptionChange('full')}\r\n                      className=\"flex-grow-1\"\r\n                    >\r\n                      Full Payment (${(currentInvoice?.total_amount - currentInvoice?.paid_amount).toFixed(2)})\r\n                    </Button>\r\n                    <Button\r\n                      variant={paymentOption === 'advance' ? 'primary' : 'outline-primary'}\r\n                      onClick={() => handlePaymentOptionChange('advance')}\r\n                      className=\"flex-grow-1\"\r\n                    >\r\n                      30% Advance (${((currentInvoice?.total_amount - currentInvoice?.paid_amount) * 0.3).toFixed(2)})\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n\r\n                <p className=\"mb-3\">\r\n                  <strong>Amount to Pay:</strong> ${paymentAmount.toFixed(2)}\r\n                </p>\r\n\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>Card Number</Form.Label>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    name=\"cardNumber\"\r\n                    value={formatCardNumber(cardDetails.cardNumber)}\r\n                    onChange={(e) => {\r\n                      const formatted = formatCardNumber(e.target.value);\r\n                      setCardDetails(prev => ({\r\n                        ...prev,\r\n                        cardNumber: formatted\r\n                      }));\r\n                    }}\r\n                    placeholder=\"1234 5678 9012 3456\"\r\n                    maxLength={19}\r\n                    required\r\n                  />\r\n                </Form.Group>\r\n\r\n                <Row className=\"mb-3\">\r\n                  <Col md={6}>\r\n                    <Form.Group>\r\n                      <Form.Label>Expiry Date</Form.Label>\r\n                      <Form.Control\r\n                        type=\"text\"\r\n                        name=\"expiryDate\"\r\n                        value={formatExpiryDate(cardDetails.expiryDate)}\r\n                        onChange={(e) => {\r\n                          const formatted = formatExpiryDate(e.target.value);\r\n                          setCardDetails(prev => ({\r\n                            ...prev,\r\n                            expiryDate: formatted\r\n                          }));\r\n                        }}\r\n                        placeholder=\"MM/YY\"\r\n                        maxLength={5}\r\n                        required\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n                  <Col md={6}>\r\n                    <Form.Group>\r\n                      <Form.Label>CVV</Form.Label>\r\n                      <Form.Control\r\n                        type=\"text\"\r\n                        name=\"cvv\"\r\n                        value={cardDetails.cvv}\r\n                        onChange={handleCardChange}\r\n                        placeholder=\"123\"\r\n                        maxLength={3}\r\n                        required\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>Cardholder Name</Form.Label>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    name=\"cardName\"\r\n                    value={cardDetails.cardName}\r\n                    onChange={handleCardChange}\r\n                    placeholder=\"John Doe\"\r\n                    required\r\n                  />\r\n                </Form.Group>\r\n              </>\r\n            )}\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            {!paymentSuccess && (\r\n              <>\r\n                <Button variant=\"secondary\" onClick={handleClosePaymentModal}>\r\n                  Cancel\r\n                </Button>\r\n                <Button variant=\"primary\" type=\"submit\" disabled={paymentLoading}>\r\n                  {paymentLoading ? (\r\n                    <>\r\n                      <Spinner as=\"span\" animation=\"border\" size=\"sm\" role=\"status\" aria-hidden=\"true\" className=\"me-1\" />\r\n                      Processing...\r\n                    </>\r\n                  ) : (\r\n                    'Confirm Payment'\r\n                  )}\r\n                </Button>\r\n              </>\r\n            )}\r\n          </Modal.Footer>\r\n        </Form>\r\n      </Modal>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default UserInvoices;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}